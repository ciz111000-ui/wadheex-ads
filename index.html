<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wadheex X â€“ Pro</title>

<link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet"/>
<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

<style>
:root{
  --bg:#0b0b12;
  --panel:#12121b;
  --purple:#8a2be2;
  --purple2:#b26cff;
  --glow:0 0 25px rgba(138,43,226,.45);
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto}
a{color:inherit;text-decoration:none}

/* ===== Hero ===== */
.hero{
  min-height:100vh;
  display:grid;
  grid-template-columns:1.1fr .9fr;
  align-items:center;
  padding:40px 6vw;
  background:
    radial-gradient(800px 400px at 80% 20%, rgba(138,43,226,.25), transparent 60%),
    linear-gradient(135deg,#0b0b12,#141422 60%,#0f0f18);
  position:relative;
  overflow:hidden;
}
.hero h1{
  font-size:clamp(28px,4vw,48px);
  line-height:1.2;
  margin:0 0 16px;
}
.hero p{opacity:.8;margin:0 0 24px}
.cta{
  display:inline-block;
  padding:14px 22px;
  border-radius:10px;
  background:linear-gradient(90deg,var(--purple),var(--purple2));
  box-shadow:var(--glow);
  transition:.3s;
}
.cta:hover{transform:translateY(-2px)}

/* 3D screen */
.screen-3d{
  width:100%;
  max-width:420px;
  aspect-ratio:9/16;
  margin-inline:auto;
  background:#000;
  border-radius:22px;
  padding:12px;
  box-shadow:0 40px 80px rgba(0,0,0,.6), var(--glow);
  transform:perspective(1200px) rotateY(-12deg) rotateX(6deg);
  transition:.5s;
}
.screen-3d:hover{transform:perspective(1200px) rotateY(-6deg) rotateX(3deg)}
.screen-inner{
  height:100%;
  border-radius:16px;
  background:
    linear-gradient(135deg,rgba(138,43,226,.25),rgba(0,0,0,.9)),
    radial-gradient(circle at 30% 20%, rgba(178,108,255,.4), transparent 60%);
  display:flex;align-items:center;justify-content:center;
  text-align:center;padding:20px;
}
.screen-inner span{font-weight:600;opacity:.9}

/* ===== Map Section ===== */
.section-map{min-height:100vh;position:relative}
#map{position:absolute;inset:0}

/* Panel (LED) */
.panel{
  position:absolute;
  top:50%;left:20px;
  transform:translateY(-50%);
  width:340px;
  max-width:90vw;
  background:var(--panel);
  border-radius:20px;
  padding:18px;
  box-shadow:0 25px 60px rgba(0,0,0,.7), var(--glow);
  transition:.4s;
}
.panel.closed{transform:translate(-110%, -50%)}
.panel h3{margin:0 0 10px;font-size:18px}
.panel small{opacity:.6}
.panel input, .panel select{
  width:100%;padding:10px;margin:8px 0;
  border-radius:8px;border:1px solid #222;background:#0f0f16;color:#fff
}
.panel button{
  width:100%;padding:12px;margin-top:10px;
  border:none;border-radius:8px;
  background:linear-gradient(90deg,var(--purple),var(--purple2));
  color:#fff;cursor:pointer
}
.toggle-btn{
  position:absolute;top:50%;left:0;
  transform:translate(-100%,-50%);
  background:var(--purple);
  padding:10px 12px;border-radius:8px 0 0 8px;
  cursor:pointer
}

/* Info badge */
.info{
  position:absolute;right:20px;bottom:20px;
  background:rgba(0,0,0,.6);
  padding:12px 16px;border-radius:12px;
  backdrop-filter:blur(8px);
}

/* Responsive */
@media(max-width:900px){
  .hero{grid-template-columns:1fr;gap:40px;text-align:center}
  .screen-3d{transform:none}
  .panel{left:50%;transform:translate(-50%,-50%)}
  .panel.closed{transform:translate(-50%,-200%)}
  .toggle-btn{left:50%;transform:translate(-50%,-100%)}
}
</style>
</head>

<body>

<!-- ===== Hero ===== -->
<section class="hero">
  <div>
    <h1>Ø§Ø­Ø¬Ø² Ø¥Ø¹Ù„Ø§Ù†Ùƒ Ø¯Ø§Ø®Ù„ Ù†Ø·Ø§Ù‚ 10 Ø¯Ù‚Ø§Ø¦Ù‚</h1>
    <p>Ù…Ù†ØµØ© ÙˆÙ…ÙŠØ¶ X â€“ Ø§Ø®ØªÙŠØ§Ø± Ø£Ù‚Ø±Ø¨ Ø´Ø§Ø´Ø©ØŒ ØªØ³Ø¹ÙŠØ± Ø°ÙƒÙŠØŒ Ø¥Ø´Ø¹Ø§Ø± ÙÙˆØ±ÙŠ.</p>
    <a href="#mapSection" class="cta">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</a>
  </div>

  <div class="screen-3d">
    <div class="screen-inner">
      <span>WADHEEX LED NETWORK<br/>North Riyadh</span>
    </div>
  </div>
</section>

<!-- ===== Map ===== -->
<section class="section-map" id="mapSection">
  <div id="map"></div>

  <div class="panel closed" id="panel">
    <div class="toggle-btn" onclick="togglePanel()">â˜°</div>
    <h3>Ø·Ù„Ø¨ Ø¥Ø¹Ù„Ø§Ù† Ø£Ø³Ø¨ÙˆØ¹</h3>
    <small id="screenName">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…ÙˆÙ‚Ø¹</small>

    <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø©"/>
    <input id="startDate" type="date"/>
    <select id="timeSlot">
      <option value="ØµØ¨Ø§Ø­ÙŠ">ØµØ¨Ø§Ø­ÙŠ</option>
      <option value="Ù…Ø³Ø§Ø¦ÙŠ">Ù…Ø³Ø§Ø¦ÙŠ</option>
      <option value="Ø·ÙˆØ§Ù„ Ø§Ù„ÙŠÙˆÙ…">Ø·ÙˆØ§Ù„ Ø§Ù„ÙŠÙˆÙ…</option>
    </select>

    <div id="priceBox">Ø§Ù„Ø³Ø¹Ø±: -</div>
    <button onclick="submitAd()">ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø±Ø³Ø§Ù„</button>
  </div>

  <div class="info" id="infoBox">Ø§Ø®ØªØ± Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</div>
</section>

<script>
// ====== CONFIG ======
mapboxgl.accessToken = "pk.eyJ1IjoibjktN3Z2IiwiYSI6ImNtbTJubnJjMDA4OGEycXNnaXN2M21lZ3QifQ.yZPWMAgrnQxnwZZdr8kwjA";
const TELEGRAM_BOT_TOKEN = "7991701749:AAE57vt1JB4gB4lLwRsRXfTEmvuFBMEjqcI";
const TELEGRAM_CHAT_ID = "735805031";

// ====== SCREENS ======
const screens = [
  {id:1,name:"Screen A - Ø§Ù„Ù†Ø®ÙŠÙ„",coords:[46.67,24.74]},
  {id:2,name:"Screen B - Ø§Ù„Ù…Ù„Ù‚Ø§",coords:[46.63,24.79]},
  {id:3,name:"Screen C - Ø§Ù„ÙŠØ§Ø³Ù…ÙŠÙ†",coords:[46.70,24.78]}
];

let selectedScreen=null;
let selectedPoint=null;

// ====== MAP ======
const map = new mapboxgl.Map({
  container:"map",
  style:"mapbox://styles/mapbox/dark-v11",
  center:[46.67,24.75],
  zoom:11
});

screens.forEach(s=>{
  new mapboxgl.Marker({color:"#b26cff"})
    .setLngLat(s.coords)
    .setPopup(new mapboxgl.Popup().setText(s.name))
    .addTo(map);
});

// click handler
map.on("click", e=>{
  selectedPoint=[e.lngLat.lng,e.lngLat.lat];
  calculateNearest();
});

// ====== CALCULATE ======
function calculateNearest(){
  let minDist=Infinity;
  screens.forEach(s=>{
    const d = turf.distance(
      turf.point(selectedPoint),
      turf.point(s.coords),
      {units:"kilometers"}
    );
    if(d<minDist){
      minDist=d;
      selectedScreen=s;
    }
  });

  if(minDist>10){
    document.getElementById("infoBox").innerHTML="Ø®Ø§Ø±Ø¬ Ù†Ø·Ø§Ù‚ 10 Ø¯Ù‚Ø§Ø¦Ù‚ âŒ";
    return;
  }

  let price = minDist<=2?4000:minDist<=5?3000:2000;
  document.getElementById("screenName").innerText=selectedScreen.name;
  document.getElementById("priceBox").innerText="Ø§Ù„Ø³Ø¹Ø±: "+price+" Ø±ÙŠØ§Ù„";
  document.getElementById("infoBox").innerHTML=
    "Ø£Ù‚Ø±Ø¨ Ø´Ø§Ø´Ø©: "+selectedScreen.name+
    "<br>Ø§Ù„Ù…Ø³Ø§ÙØ©: "+minDist.toFixed(2)+" ÙƒÙ…";
}

// ====== SUBMIT ======
function submitAd(){
  if(!selectedScreen||!selectedPoint){
    alert("Ø§Ø®ØªØ± Ù…ÙˆÙ‚Ø¹ Ø£ÙˆÙ„Ø§Ù‹");
    return;
  }

  const name=document.getElementById("name").value;
  const date=document.getElementById("startDate").value;
  const time=document.getElementById("timeSlot").value;

  const message=
`Ø·Ù„Ø¨ Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯ ğŸš€
Ø§Ù„Ù…Ù†Ø´Ø£Ø©: ${name}
Ø§Ù„Ø´Ø§Ø´Ø©: ${selectedScreen.name}
Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}
Ø§Ù„ÙˆÙ‚Øª: ${time}
Ø§Ù„Ù…ÙˆÙ‚Ø¹:
https://maps.google.com/?q=${selectedPoint[1]},${selectedPoint[0]}`;

  // Telegram
  fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      chat_id:TELEGRAM_CHAT_ID,
      text:message
    })
  });

  // WhatsApp
  window.open(
    `https://wa.me/966583611252?text=${encodeURIComponent(message)}`,
    "_blank"
  );

  alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ğŸš€");
}

// ====== UI ======
function togglePanel(){
  document.getElementById("panel").classList.toggle("closed");
}
</script>

</body>
</html>
