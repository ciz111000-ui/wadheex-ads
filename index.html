<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wadheex X â€“ Riyadh Locked</title>

<link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet"/>
<script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

<style>
:root{
  --bg:#0b0b15;
  --glass:rgba(15,15,25,.6);
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:#fff;font-family:system-ui}

.header{
  height:70px;background:#0b0b15;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 20px;border-bottom:1px solid rgba(255,255,255,.08);
  position:sticky;top:0;z-index:20;
}
.logo{font-weight:bold;font-size:22px;color:#00e0ff}

.map-wrap{position:relative;height:calc(100vh - 70px)}
#map{position:absolute;inset:0}

.panel{
  position:absolute;top:0;right:0;
  width:380px;height:100%;
  background:var(--glass);
  backdrop-filter:blur(18px);
  border-left:1px solid rgba(255,255,255,.08);
  padding:20px;z-index:10;
  transition:.35s;
}
.panel.collapsed{transform:translateX(340px)}

.toggle{
  position:absolute;left:-40px;top:50%;
  transform:translateY(-50%);
  width:40px;height:80px;
  background:rgba(20,20,35,.95);
  border-radius:10px 0 0 10px;
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;font-size:20px;
}

.panel input, .panel select{
  width:100%;padding:12px;margin:10px 0;
  background:#0f0f18;border:1px solid #222;
  color:#fff;border-radius:6px;
}
.panel button{
  width:100%;padding:14px;margin-top:10px;
  background:linear-gradient(90deg,#8a2be2,#b26cff);
  border:none;color:#fff;border-radius:8px;
  font-size:16px;cursor:pointer;
}
.status{margin:10px 0;font-weight:bold}

@media(max-width:900px){
  .panel{
    width:100%;height:65%;
    top:auto;bottom:0;border-left:none;
    border-top:1px solid rgba(255,255,255,.08);
    border-radius:20px 20px 0 0;
    overflow-y:auto;
  }
  .panel.collapsed{transform:translateY(85%)}
  .toggle{
    left:50%;top:-18px;
    transform:translate(-50%,-50%);
    width:70px;height:30px;border-radius:12px;
  }
}
</style>
</head>
<body>

<header class="header">
  <div class="logo">W X</div>
</header>

<section class="map-wrap">
  <div id="map"></div>

  <div class="panel collapsed" id="panel">
    <div class="toggle" onclick="togglePanel()">â˜°</div>

    <h3>Ø­Ø¬Ø² Ù…Ø³Ø§Ø­Ø© Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© (Ø£Ø³Ø¨ÙˆØ¹)</h3>

    <div id="screenName">Ø§Ø®ØªØ± Ù…ÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</div>
    <div id="duration"></div>
    <div id="price"></div>
    <div class="status" id="status"></div>

    <input id="bizName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø©"/>

    <select id="bizType">
      <option value="">Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†Ø´Ø£Ø©</option>
      <option>Ù…Ø·Ø¹Ù…</option>
      <option>ÙƒØ§ÙÙŠÙ‡</option>
      <option>Ù…ØªØ¬Ø±</option>
      <option>Ø¹ÙŠØ§Ø¯Ø©</option>
      <option>Ø´Ø±ÙƒØ©</option>
      <option>ØªØ·Ø¨ÙŠÙ‚</option>
      <option>Ø¬Ù‡Ø© Ø­ÙƒÙˆÙ…ÙŠØ©</option>
      <option>Ø£Ø®Ø±Ù‰</option>
    </select>

    <input id="adNote" placeholder="ÙˆØµÙ Ù…Ø®ØªØµØ± Ù„Ù„Ø¥Ø¹Ù„Ø§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"/>

    <select id="screensCount">
      <option value="1">Ø´Ø§Ø´Ø© ÙˆØ§Ø­Ø¯Ø©</option>
      <option value="2">Ø´Ø§Ø´ØªÙŠÙ†</option>
      <option value="3">Ø«Ù„Ø§Ø« Ø´Ø§Ø´Ø§Øª</option>
      <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª</option>
    </select>

    <label>ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</label>
    <input id="startDateTime" type="datetime-local"/>

    <label>Ù‡Ù„ ØªØ­ØªØ§Ø¬ ØªØµÙ…ÙŠÙ… Ø¥Ø¹Ù„Ø§Ù†ØŸ</label>
    <select id="needDesign">
      <option value="no">Ù„Ø§ØŒ Ù„Ø¯ÙŠ ØªØµÙ…ÙŠÙ… Ø¬Ø§Ù‡Ø²</option>
      <option value="yes">Ù†Ø¹Ù…ØŒ Ø£Ø­ØªØ§Ø¬ ØªØµÙ…ÙŠÙ… (+800 Ø±ÙŠØ§Ù„)</option>
    </select>

    <input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„ 05XXXXXXXX" />

    <button id="bookBtn" disabled onclick="confirmBooking()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²</button>
  </div>
</section>

<script>
mapboxgl.accessToken="pk.eyJ1IjoibjktN3Z2IiwiYSI6ImNtbTJubnJjMDA4OGEycXNnaXN2M21lZ3QifQ.yZPWMAgrnQxnwZZdr8kwjA";

/* ğŸ”’ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø±ÙŠØ§Ø¶ */
const riyadhBounds = [
  [46.35, 24.45], // Ø¬Ù†ÙˆØ¨ ØºØ±Ø¨
  [47.15, 25.15]  // Ø´Ù…Ø§Ù„ Ø´Ø±Ù‚
];

const map=new mapboxgl.Map({
  container:"map",
  style:"mapbox://styles/mapbox/dark-v11",
  center:[46.67,24.75],
  zoom:11,
  minZoom:9,
  maxZoom:16,
  maxBounds: riyadhBounds
});

map.addControl(new mapboxgl.NavigationControl());

const MAX_KM=8;

const screens=[
 { name:"Screen A â€“ Ø§Ù„ÙŠØ§Ø³Ù…ÙŠÙ†", coords:[46.67,24.74], color:"#ff3b3b"},
 { name:"Screen B â€“ Ø§Ù„Ù†Ø±Ø¬Ø³", coords:[46.63,24.79], color:"#2b8cff"},
 { name:"Screen C â€“ Ø§Ù„Ù…Ù„Ù‚Ø§", coords:[46.70,24.78], color:"#a855f7"}
];

let selected=null;

map.on("load",()=>{
  screens.forEach((screen)=>{
    new mapboxgl.Marker({color:screen.color})
      .setLngLat(screen.coords).addTo(map);
